# 文件的物理结构

#### 文件的物理结构

文件的物理结构，又称为物理文件，是指文件在物理存储空间中的存放方法和组织关系。

文件的存储结构涉及块的划分、记录的排列、索引的组织、信息的搜索等许多问题。

其优劣直接影响文件系统的性能。

#### 顺序文件

将一个文件中逻辑上连续的信息存放到存储介质的依次相邻的块中便形成顺序结构，这类文件叫顺序文件，又称连续文件。

磁带文件、光盘文件是典型例子。

**优点**

顺序存取记录时速度较快。

批处理文件，系统文件用得最多，采用磁带存放顺序文件时，总可以保持快速存取的优点。

**缺点**

建立文件前需要能预先确定文件长度，以便分配存储空间。修改、插入和增加文件记录有困难。

#### 连接文件

连接文件，又称串联文件。连接结构的特点是使用连接字来表示文件中各个物理块之间的先后次序。

第一块文件信息的物理地址由文件目录给出，而每一块的连接字指出了文件的下一个物理块位置\(类似数据结构链表\)。连接字内容为0时，表示文件至本块结束。

像输入井、输出井等都用此类文件。

**优点**

易于对文件记录做增、删、改，易于动态增长记录，不必预先确知文件长度。存储空间利用率高。

**缺点**

存放指针需额外的存储空间。由于存取需通过缓冲区，待获得连接字后，才能找到下一物理块的地址，因为，仅适用于顺序存取。

#### 直接文件

直接文件，又称散列文件，它通过计算记录的关键字建立与其物理存储地址之间的对应关系。

计算寻址结构可能出现冲突，即不同的关键字可能变换出相同的地址来，解决办法有拉链法、循环探查法、二次散列法、溢出区法等。

#### 索引文件

索引文件为每个文件建立了一张索引表，其中，每个表目包含一个记录的键\(或逻辑记录号\)及其存储地址。

索引表的地址可由文件目录指出，查阅索引表先找到相应记录键\(或逻辑记录号\)，然后获得数据存储地址。

**访问方式**

索引文件在文件存储器上分两个区，索引区和数据区。

访问索引文件需两步操作，第一步查找索引表，第二步获得记录物理地址。

需要两次访问辅助存储器，若文件索引已预先调入主存储器，那么，就可以减少一次内外存信息交换。

**特点**

索引结构可以被认为是连接结构的一种扩展，除了具备连接文件的优点外，还克服了它只能作顺序存取的缺点，具有直接读写任意一个记录的能力，便于文件的增、删、改。

索引还可以有一级索引、二级索引、多级索引。

**缺点**

增加了索引表的空间开销和查找时间。

